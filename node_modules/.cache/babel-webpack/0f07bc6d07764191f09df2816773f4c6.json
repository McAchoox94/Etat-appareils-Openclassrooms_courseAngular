{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/appareils.service\";\n\nfunction AppareilViewComponent_app_appareil_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-appareil\", 5);\n  }\n\n  if (rf & 2) {\n    const appareil_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵproperty(\"appareilName\", appareil_r1.name)(\"appareilStatus\", appareil_r1.status)(\"index\", i_r2)(\"id\", appareil_r1.id);\n  }\n}\n\nexport class AppareilViewComponent {\n  constructor(appareilService) {\n    this.appareilService = appareilService;\n    this.isAuth = false;\n    this.lastUpdate = new Promise((resolve, reject) => {\n      const date = new Date();\n      setTimeout(() => {\n        resolve(date);\n      }, 2000);\n    });\n  }\n\n  ngOnInit() {\n    this.appareilSubscription = this.appareilService.appareilsSubject.subscribe(appareils => {\n      this.appareils = appareils;\n    });\n    this.appareilService.emitAppareilSubject();\n  }\n\n  onAllumer() {\n    this.appareilService.switchOnAll();\n  }\n\n  onEteindre() {\n    if (confirm('Etes-vous sûr de vouloir éteindre tous vos appareils ?')) {\n      this.appareilService.switchOffAll();\n    } else {\n      return null;\n    }\n  }\n\n  ngOnDestroy() {\n    this.appareilSubscription.unsubscribe();\n  }\n\n}\n\nAppareilViewComponent.ɵfac = function AppareilViewComponent_Factory(t) {\n  return new (t || AppareilViewComponent)(i0.ɵɵdirectiveInject(i1.AppareilsService));\n};\n\nAppareilViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppareilViewComponent,\n  selectors: [[\"app-appareil-view\"]],\n  decls: 14,\n  vars: 4,\n  consts: [[1, \"appareil-view\"], [1, \"list-group\"], [3, \"appareilName\", \"appareilStatus\", \"index\", \"id\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [3, \"appareilName\", \"appareilStatus\", \"index\", \"id\"]],\n  template: function AppareilViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"h2\");\n      i0.ɵɵtext(2, \"Etat des appareils\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"ul\", 1);\n      i0.ɵɵtemplate(4, AppareilViewComponent_app_appareil_4_Template, 1, 4, \"app-appareil\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"h2\");\n      i0.ɵɵtext(6, \"Mes appareils\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function AppareilViewComponent_Template_button_click_10_listener() {\n        return ctx.onAllumer();\n      });\n      i0.ɵɵtext(11, \"Tout allumer\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function AppareilViewComponent_Template_button_click_12_listener() {\n        return ctx.onEteindre();\n      });\n      i0.ɵɵtext(13, \"Tout \\u00E9teindre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.appareils);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Mis \\u00E0 jour : \", i0.ɵɵpipeBind1(9, 2, ctx.lastUpdate), \"\");\n    }\n  },\n  styles: [\".appareil-view[_ngcontent-%COMP%] {\\n  margin-top: 17px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGFyZWlsLXZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBQTtBQUNKIiwiZmlsZSI6ImFwcGFyZWlsLXZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYXBwYXJlaWwtdmlldyB7XHJcbiAgICBtYXJnaW4tdG9wOiAxN3B4O1xyXG59Il19 */\"]\n});","map":{"version":3,"sources":["C:\\Users\\achra\\Documents\\Angular\\Openclassrooms\\appOClassR1\\src\\app\\appareil-view\\appareil-view.component.ts","C:\\Users\\achra\\Documents\\Angular\\Openclassrooms\\appOClassR1\\src\\app\\appareil-view\\appareil-view.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { AppareilsService } from '../services/appareils.service';\n\n@Component({\n  selector: 'app-appareil-view',\n  templateUrl: './appareil-view.component.html',\n  styleUrls: ['./appareil-view.component.scss']\n})\nexport class AppareilViewComponent implements OnInit, OnDestroy {\n\n  isAuth = false;\n\n  appareils! :any[];\n  appareilSubscription!: Subscription;\n\n  lastUpdate = new Promise((resolve, reject) => {\n    const date = new Date();\n    setTimeout(() => {\n      resolve(date);\n    }, 2000\n    );\n  });\n\n  constructor( private appareilService: AppareilsService ) {}\n\n  ngOnInit() {\n    this.appareilSubscription = this.appareilService.appareilsSubject.subscribe(\n      (appareils: any[]) => {\n        this.appareils = appareils;\n      }\n    );\n    this.appareilService.emitAppareilSubject();\n  }\n\n  onAllumer() {\n    this.appareilService.switchOnAll();\n  }\n  \n  onEteindre() {\n    if(confirm('Etes-vous sûr de vouloir éteindre tous vos appareils ?')) {\n      this.appareilService.switchOffAll();\n    } else {\n      return null;\n    }\n}\n\nngOnDestroy() {\n  this.appareilSubscription.unsubscribe();\n}\n\n}\n","<div class=\"appareil-view\">\n\n<h2>Etat des appareils</h2>\n<ul class=\"list-group\">\n  <app-appareil  *ngFor=\"let appareil of appareils; let i = index\"\n                 [appareilName]=\"appareil.name\"\n                 [appareilStatus]=\"appareil.status\" \n                 [index]=\"i\"\n                 [id]=\"appareil.id\"></app-appareil>\n</ul>\n\n<h2>Mes appareils</h2>\n<p>Mis à jour : {{ lastUpdate | async }}</p>\n\n<button class=\"btn btn-success\"\n        (click)=\"onAllumer()\">Tout allumer</button>\n<button class=\"btn btn-danger\"\n        (click)=\"onEteindre()\">Tout éteindre</button>\n        \n </div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}